{
  "id": "player-stats-mlb",
  "run": {
    "cpus": 1,
    "mem": 5000,
    "disk": 20000,
    "args": ["/opt/spark/dist/bin/spark-submit",
        "--name","PlayerStats","--class", "com.slingmedia.sportscloud.offline.batch.impl.MetaDataMuncher" ,
        "--driver-memory", "4G", 
        "--executor-memory", "4G", 
        "--total-executor-cores", "1", 
        "--conf", "spark.es.index.auto.create=true",
        "--conf", "spark.es.resource=sports-cloud/game_schedule",
        "--conf", "spark.es.nodes=data.marathon.l4lb.thisdcos.directory",
        "--conf", "spark.es.net.http.auth.user=elastic",
        "--conf", "spark.es.net.http.auth.pass=changeme",
        "--conf", "spark.es.write.operation=upsert",
        "--conf", "spark.default.parallelism=4",
        "--conf", "spark.executor.extraJavaOptions=-XX:+UseG1GC -XX:InitiatingHeapOccupancyPercent=30  -XX:G1ReservePercent=15 -XX:MaxGCPauseMillis=2000 -XX:+UseCompressedOops",
        "--conf", "spark.serializer=org.apache.spark.serializer.KryoSerializer",
        "--packages","org.apache.spark:spark-sql-kafka-0-10_2.11:2.1.1",
        "http://artifact-server.marathon.l4lb.thisdcos.directory:9082/artifacts/slingtv/sports-cloud/all-spark-jobs.jar" , "PLAYERSTATS", "meta_batch" , "player_stats"
        ],
    "docker": {
      "image": "registry.marathon.l4lb.thisdcos.directory:5000/spark:2.0.1-2.2.0-1-hadoop-2.6"
    },
    "maxLaunchDelay": 3600,
    "restart": {
      "activeDeadlineSeconds": 1200,
      "policy": "NEVER"
    },
    "user": "root"
  },
  "schedules": [
    {
      "id": "default",
      "enabled": true,
      "cron": "0 10 * * *",
      "timezone": "UTC",
      "concurrencyPolicy": "ALLOW",
      "startingDeadlineSeconds": 60
    }
  ],
  "description": "Upload player stats to kafka"
}